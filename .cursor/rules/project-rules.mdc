---
description: 프로젝트 전역 규칙. PRD/TRD를 Source of Truth로 준수하고(충돌 시 PRD/TRD 우선), 항상 한국어로 응답하며, Non-Intrusive AI(요청 전 과개입 금지)와 Docs-first(먼저 문서, 다음 코드)를 지킨다. AI는 문서에 자동 적용하지 않으며(Preview→Apply 유도), 저장/IPC/보안 원칙을 따른다.
globs: "**/*"
alwaysApply: true
---
이 파일은 **전역 규칙(항상 적용)** 입니다. 내용은 “원칙”만 유지하고, 상세 스펙은 `prd.md`/`trd.md`를 **단일 Source of Truth**로 참조합니다(중복 요약을 넣지 않아 드리프트를 방지).

---

## 0) Source of Truth / 불확실성 처리
- 최상위 기준 문서: `prd.md`, `trd.md`
- 코드/다른 문서/규칙이 PRD/TRD와 충돌하면 **PRD/TRD에 맞춰 정리**합니다.
- 불확실하거나 큰 설계 변경이 필요하면 **추측하지 말고 확인 질문**을 먼저 합니다.

---

## 1) 커뮤니케이션 (Assistant 동작)
- **항상 한국어로** 답합니다.
- 사용자의 명시적 요청(버튼/메뉴/단축키 등) 전에는 **과도한 제안/자동 진행 금지**(Non-Intrusive).
- 변경은 **최소 단위로** 수행하고, **이유/의도/리스크**를 함께 설명합니다.

---

## 2) 제품/UX 원칙 (요약)
- **Document-First**: 번역가는 “문서 편집”에 집중.
- **3 패널**: Source / Target / AI(Chat). Focus Mode로 Source 숨김 지원.
- **Keyboard-First**: 핵심 플로우는 단축키 중심.
- **사용자 주도 편집**: AI는 조력자이며, 문서 자동 변경/자동 적용 금지.

---

## 3) AI 인터랙션 (필수 제약)
- AI는 **요청 시에만** 응답합니다.
- 채팅은 **문서에 자동 적용하지 않습니다.** 번역은 Translate(Preview→Apply)로 유도합니다.
- “Add to chat”은 **선택 텍스트를 채팅 입력으로 옮기는 보조 UX**이며, 단독으로 모델 호출을 발생시키지 않습니다.
- 출력 포맷 강제(상세는 PRD/TRD 준수):
  - 번역(문서 전체): TipTap JSON만 출력(설명 없이)
  - 질문/검수: 간결한 답변 또는 JSON 리포트

---

## 4) Docs-first 작업 순서(필수)
- 기능/UX 변경이 있으면 **먼저 `prd.md`/`trd.md`를 업데이트**하고, 그 명세에 맞춰 구현합니다.
- 코드 반영 후 관련 작업 문서(예: `tasks-by-phase.md`)를 최신 상태로 동기화합니다.

---

## 5) 기술/데이터/보안 원칙 (요약)
- 목표 아키텍처/스택/저장 규칙은 **`trd.md` 준수**(상세는 TRD를 단일 기준으로).
- Rust ↔ React IPC는 저지연을 우선하며, 대용량 저장 시 **UI 프리즈를 유발하지 않게** 합니다.
- API 키/토큰 등 비밀정보는 **하드코딩 금지**(로컬 환경변수로만 관리).
