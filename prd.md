📝 [PRD] OddEyes.ai

이 문서는 OddEyes.ai의 **제품 요구사항(Product Requirements Document)**입니다.
개발 과정에서 방향을 잃지 않도록 하는 나침반 역할을 합니다.

---

## 1. 제품 개요 (Product Overview)

**제품명**: OddEyes.ai (내부 코드명: Integrated Translation Editor / ITE)

**비전**: "AI를 동료로, 번역을 예술로" - 전문 번역가가 주도권을 가지고, AI가 조력하는 지능형 번역 워크스테이션.
번역가 본연의 작업 리듬을 방해하지 않으면서, 필요할 때 AI의 도움을 받아 효율을 높이는 경험을 제공합니다.

**핵심 컨셉**:
- 전통적인 CAT Tool의 경직된 그리드 구조를 탈피
- Notion 스타일의 자유로운 리치 텍스트 편집 환경
- AI는 요청 시에만 응답하며, 번역문 수정은 99% 사용자가 직접 수행

---

## 2. 타겟 사용자 (Target Audience)

- 게임, IT, 마케팅 분야의 인하우스 및 전문 프리랜서 번역가
- AI를 활용한 스타일 교정, 용어 일관성 검수, 문맥 최적화가 필요한 전문가
- 브라우저(검색/사전)와 에디터를 오가는 Alt-Tab 비용을 줄이고 싶은 생산성 중시 번역가

---

## 3. 핵심 기능 (Core Features)

### 3.1 TipTap 기반 "Notion 스타일" 에디터

**Document-First 편집 경험**:
- 리치 텍스트 지원: 헤딩(H1-H6), 불릿/번호 리스트, 볼드, 이탤릭, 취소선, 인용 블록
- 일반 문서(Notion/Ulysses)와 같은 가독성과 편집 자유도 제공
- 코드 에디터의 복잡한 UI를 제거한 깔끔한 인터페이스

**Source 패널 (원문/작업용 원고)**:
- 원문은 왼쪽에 배치하며, 사용자가 원문을 **붙여넣고/정리/편집**할 수 있습니다 (Source/Target 모두 TipTap 편집 가능).
- AI에게는 최우선 맥락(Context)으로 제공됩니다.
  - 단, 토큰 최적화를 위해 “질문(채팅)”에서는 원문/번역문을 항상 초기 payload에 포함하지 않을 수 있으며,
    필요 시에만 on-demand(도구 호출)로 문서를 불러와 활용합니다.

**Focus Mode**:
- 원문 패널을 숨기고 번역문과 AI 대화에만 집중하는 레이아웃 전환 지원

### 3.2 AI 상호작용 (번역사 주도)

**핵심 원칙**:
- 번역사가 주도권을 가지고, AI는 요청 시에만 응답
- 번역문 수정은 99% 사용자가 직접 수행 (단, “문서 전체 번역”은 Preview 후 Apply 방식으로 지원)
- AI 응답은 간결하게 - 번역 요청 시 번역문만, 질문 시 답변만

**Selection → Chat (보조 UX)**:
- 에디터에서 선택한 텍스트를 **단축키(Cmd+L)** 등으로 채팅 입력창에 복사하는 보조 UX
- **모델 호출 없이** 컨텍스트/질문 초안을 준비하는 용도 (사용자 주도)

**채팅 세션 분리 권장**:
- 질문용 탭: 내용/문맥/용어에 관한 질문 (기본)
- 번역은 “문서 전체 번역” 버튼 워크플로우(Preview→Apply)를 기본 경로로 제공

**문서 전체 번역 (Preview → Apply)**:
- Source 문서 전체를 대상으로 번역을 생성하고, 결과를 **Preview로 확인한 뒤 Apply**로 Target 문서를 **전체 덮어쓰기**합니다.
- 사용자는 Apply를 누르기 전까지 문서가 변경되지 않습니다(Non-Intrusive).
- 번역 생성 시 채팅 히스토리는 포함하지 않으며, Settings의 페르소나/번역 규칙/Project Context/글로서리만 컨텍스트로 사용합니다.
- 출력은 **Markdown**으로 받아 TipTap JSON으로 변환 후 Preview로 표시합니다. (토큰 효율성 및 청킹 단순화를 위해)

**프롬프트 전략**:
- 번역 요청: 불필요한 설명 없이 **Markdown 번역문만** 출력 (`---TRANSLATION_START/END---` 구분자 사용)
- 질문 요청: 맥락에 맞는 간결한 설명 제공 (필요 시 JSON 리포트)

**채팅 UX (일반적인 채팅 앱 수준)**:
- 응답을 기다리는 동안 “로딩/typing 인디케이터”로 진행 상태를 표시합니다.
- 모델이 문서 조회 등 Tool을 호출하는 동안 “툴 실행 중” 상태를 표시할 수 있습니다.
- 위 표시는 보조 UX이며, 문서 자동 수정/자동 적용과 무관합니다(Non-Intrusive).
- **채팅 입력창(Composer)**:
  - 입력창 좌측 하단에 `+` 버튼을 두고, 클릭 시 드롭다운 메뉴를 엽니다.
    - 파일 또는 이미지 추가(프로젝트 단위 첨부)
    - 웹 검색 체크(웹검색 사용 여부)
  - Send 버튼은 입력창 **우측 하단**에 **화살표 아이콘**으로 표시합니다(문자 “Send”는 표시하지 않음).
  - 입력 내용이 있어야 Send 버튼이 활성화됩니다.
  - Enter 입력 시 전송되며, Shift+Enter는 줄바꿈입니다.
- **웹검색 사용 원칙**:
  - 웹 검색 체크가 **활성화된 경우에만** 웹검색 도구(Brave/OpenAI web search)를 사용할 수 있습니다.
- **AI 채팅 패널 폭 규칙**:
  - 기본 폭은 에디터 영역 대비 약 40%로 설정하여 Settings/Chat UI가 답답하지 않게 합니다.
  - 리사이즈 핸들로 최소 25% ~ 최대 80% 범위에서 자유롭게 조절할 수 있어야 하며, 이 범위는 프로젝트 사이드바를 제외한 메인 작업 영역 기준입니다.
  - 사용자가 채팅/Settings에 집중할 수 있도록 에디터 패널은 20%까지 줄일 수 있지만, 기본 레이아웃은 문서 편집 우선(60%)을 유지합니다.

### 3.3 전문가용 컨텍스트 및 리소스 관리

**Smart Context Memory**:
- Translation Rules: 포맷, 서식, 문체 등 번역에 적용되는 규칙 (예: "해요체 사용", "따옴표 유지")
- Project Context: 번역 시 참고할만한 추가 맥락 정보(배경 지식, 프로젝트 컨텍스트 등)
- 이전 대화의 핵심 결정 사항을 요약하여 장기적인 일관성 유지
- 사용자 확인 후에만 Memory에 추가 (자동 추가 금지)

**Integrated Glossary (비벡터)**:
- 업로드한 용어집 파일을 로컬에서 직접 읽기
- 텍스트 기반 검색(룰/FTS)으로 관련 용어만 AI에게 자동 주입
- 임베딩/벡터화 없이 단순하고 예측 가능한 동작

### 3.4 LangChain.js 기반 도구 (Tools)

**검수 도구 (추후 구현)**:
- `checkSpelling`: 오탈자 체크
- `checkConsistency`: 용어 일관성 체크
- `reviewQuality`: 번역 품질 검수

**웹검색**:
- OpenAI Web Search: 빌트인 웹 검색 (기본)
- Brave Search: 폴백 웹 검색 (API 키 필요)

**MCP 연동 (구현됨)**:
- Atlassian (Confluence): 문서 검색/가져오기
- Notion: 문서 검색/가져오기 (예정)

**OpenAI 빌트인 커넥터 (예정)**:
- Google Workspace: Drive, Calendar, Gmail
- Dropbox, SharePoint, Microsoft Teams

**도구 사용 표시(가시성)**:
- 웹검색/문서 조회 등 Tool이 사용된 경우, 채팅 메시지 하단에 “도구 사용됨/실행 중” 배지를 작게 표시하여 사용자가 근거/맥락 출처를 인지할 수 있게 합니다.

### 3.5 로컬 기반 프로젝트 관리

**All-in-one Project File (.ite)**:
- SQLite 기반의 단일 파일에 텍스트, 이력, 대화 로그, 설정을 모두 통합 저장
- TipTap JSON 형식으로 리치 텍스트 보존

**Snapshot History**:
- 텍스트 수정 내역뿐 아니라, AI와 나눈 대화 맥락까지 함께 보존
- 프로젝트 재개 시 모든 상태 복원

### 3.6 보안/키 관리

- API Key는 OS 키체인/키링에 안전하게 저장하며 localStorage나 환경 변수에는 저장하지 않습니다.
- App Settings에서 입력/삭제 가능하고, 앱 시작 시 키체인에서 로드합니다.

---

## 4. 사용자 경험 (UX) 원칙

**Non-Intrusive AI**:
- AI는 사용자가 명시적으로 요청할 때만 개입
- 자동 수정, 자동 적용 없음

**Keyboard-First**:
- 핵심 기능은 단축키로 제어 가능
- 마우스 없이도 효율적인 작업 흐름 유지

**Visual Clarity**:
- Notion 감성의 깔끔한 타이포그래피
- 가독성을 해치지 않는 UI 디자인

**사용자 직접 수정**:
- AI 제안은 채팅창에 텍스트로 표시
- 적용 여부와 방식은 번역사가 직접 결정
- 복사/붙여넣기 또는 참고하여 직접 타이핑

---

## 5. 성공 지표 (Success Metrics)

**Task Efficiency**:
- 기존 방식 대비 문장당 번역/수정 소요 시간 30% 이상 단축

**Context Retention**:
- AI가 이전 대화에서 결정된 용어나 스타일을 위반하는 사례 최소화

**Focus Continuity**:
- 작업 중 브라우저나 외부 툴로 창을 전환하는 횟수 70% 감소

---

## 6. 사용자 시나리오 / User Journey

아래 시나리오는 최신 `trd.md`의 워크플로우(Preview → Apply, Non-Intrusive)와 일치하도록 작성합니다.

1) **프로젝트 시작**
- ITE 앱을 켜고, 번역할 내용을 **Source 패널에 붙여넣고/정리/편집**합니다.
- 필요 시 용어집(글로서리) 및 참고 자료를 첨부합니다. *(확장 포맷은 추후 범위 포함)*

2) **Settings / 규칙 정리**
- 시스템 프롬프트 오버레이, Translation Rules, Project Context를 설정합니다.

3) **문서 전체 번역 (Preview → Apply)**
- **Translate 버튼**으로 문서 전체 번역을 생성합니다.
- 결과는 **Preview/Diff로 확인**하고, 확정할 때만 **Apply**로 Target 전체를 덮어씁니다.
- 이때 최근 채팅(최대 10개), Translation Rules/Project Context, 첨부된 글로서리/참고자료를 컨텍스트로 활용할 수 있습니다.

4) **비교/수정**
- 원문(Source)과 번역(Target)을 비교하며 필요한 부분은 **사용자가 직접 편집**합니다.
- 규칙이 바뀌었거나 큰 수정이 필요하면, 업데이트된 Rules/Context를 반영하기 위해 **Translate를 다시 실행**하고 Diff로 재검토합니다.

5) **질문/개념 확인 (채팅 탭 분리)**
- 어려운 개념/문맥/용어는 **새 채팅 탭**에서 질문합니다.
- 필요한 경우 assistant 응답을 **Add to Rules / Add to Context**로 축적하여 일관성을 유지합니다.
  - Add to Rules: 번역 규칙(포맷, 서식, 문체 등) 추가
  - Add to Context: 맥락 정보(배경 지식, 프로젝트 컨텍스트 등) 추가

6) **검수/리뷰(요청 기반)**
- 채팅에서 누락/오역/일관성/톤 검수 요청을 하고 리포트를 확인합니다.
- `checkSpelling`/`checkConsistency`/`reviewQuality` 같은 Tools는 **추후 구현** 범위입니다.

7) **저장/재개**
- `.ite` 파일로 저장하고, 나중에 다시 열어도 문서/대화/설정 맥락이 복원됩니다.

---

## 7. 향후 로드맵 (Future Roadmap)

**Phase 1 (현재)**:
- TipTap 에디터 기반 편집 환경
- 멀티 탭 AI 채팅
- 기본 프로젝트 저장/로드
- 문서 전체 번역 (Preview→Apply) 버튼

**Phase 2**:
- (고도화) 문서 전체 번역 품질/일관성 향상: 서식 보존 강화, 충돌 감지(원문/번역문 변경 시 재생성 안내)
- LangChain.js Tools (오탈자/일관성/품질 검수)

**Phase 3**:
- MCP 연동 확장 (Notion, 외부 사전)
- OpenAI 빌트인 커넥터 (Google, Dropbox, Microsoft)
- 고급 용어집 관리
- 협업 기능 검토

---

## 8. 기술 스택 참고

**AI Provider**: OpenAI 전용 (gpt-4o-mini, o4-mini 등)
- 단일 Provider로 단순화하여 유지보수 비용 감소
- OpenAI Responses API의 빌트인 도구/커넥터 활용
