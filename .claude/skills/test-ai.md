# /test-ai

AI í”„ë¡¬í”„íŠ¸ì™€ í˜ì´ë¡œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. Dry-run ëª¨ë“œë¡œ ì‹¤ì œ API í˜¸ì¶œ ì—†ì´ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **TRD ê¸°ì¤€**: 3.1, 3.2 | **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01
> **ëª¨ë¸**: GPT-5 (400k context window), ê¸°ë³¸ gpt-5.2

## Usage

```
/test-ai                    # í˜„ì¬ ì„¤ì •ìœ¼ë¡œ í˜ì´ë¡œë“œ ë¯¸ë¦¬ë³´ê¸°
/test-ai --mode translate   # ë²ˆì—­ ëª¨ë“œ í˜ì´ë¡œë“œ í…ŒìŠ¤íŠ¸
/test-ai --mode chat        # ì±„íŒ… ëª¨ë“œ í˜ì´ë¡œë“œ í…ŒìŠ¤íŠ¸
/test-ai --tokens           # í† í° ì‚¬ìš©ëŸ‰ ì¶”ì •
/test-ai --live             # ì‹¤ì œ API í˜¸ì¶œ (ì£¼ì˜!)
```

## Test Scenarios

### 1. Translation Mode Test

```
/test-ai --mode translate
```

**ê²€ì¦ í•­ëª©**:
- System prompt êµ¬ì„±
- Source document â†’ Markdown ë³€í™˜ ìœ íš¨ì„±
- Translation rules í¬í•¨ ì—¬ë¶€
- Project context í¬í•¨ ì—¬ë¶€
- Glossary ë§¤ì¹­ í•­ëª©
- ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” ë³€í™˜

**Markdown íŒŒì´í”„ë¼ì¸** (TRD 3.1):
```
Source TipTap JSON
    â†“ tiptap-markdown extension
Markdown ë¬¸ìì—´
    â†“ extractImages() - Base64 â†’ í”Œë ˆì´ìŠ¤í™€ë”
Markdown (ì´ë¯¸ì§€ ì œê±°)
    â†“ LLM (streaming)
Markdown ì‘ë‹µ
    â†“ restoreImages() - í”Œë ˆì´ìŠ¤í™€ë” â†’ Base64 ë³µì›
    â†“ extractTranslationMarkdown() - ë§ˆì»¤ ì¶”ì¶œ
Markdown (ì •ì œ)
    â†“ markdownToTipTapJson()
Target TipTap JSON
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              TRANSLATION MODE - DRY RUN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PAYLOAD STRUCTURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Messages: 2 (SystemMessage + HumanMessage)

[SystemMessage] (2,450 tokens est.)
â”œâ”€ Role definition: âœ…
â”œâ”€ Translation rules: âœ… (1,200 chars)
â”œâ”€ Project context: âœ… (800 chars)
â”œâ”€ Glossary terms: 12 matched
â””â”€ Output format: Markdown with markers

[HumanMessage] (3,200 tokens est.)
â””â”€ Source document: Markdown (2,800 chars)
   â””â”€ Images: 3 â†’ placeholders (99%+ token savings)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š TOKEN ESTIMATION (GPT-5 400k context)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Input tokens:   ~5,650
Output tokens:  ~3,500 (estimated, max 65,536)
Total:          ~9,150
Context usage:  2.3% of 400k

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ OUTPUT FORMAT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
---TRANSLATION_START---
[ë²ˆì—­ëœ Markdown]
---TRANSLATION_END---

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸  WARNINGS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Glossaryì— 12ê°œ ìš©ì–´ ë§¤ì¹­ë¨ - ì»¨í…ìŠ¤íŠ¸ ì¦ê°€
â€¢ Source ë¬¸ì„œì— code block í¬í•¨ - ë²ˆì—­ ì œì™¸ ê¶Œì¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… VALIDATION PASSED
Ready for translation. Use --live to execute.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 2. Chat Mode Test

```
/test-ai --mode chat
```

**ê²€ì¦ í•­ëª©**:
- Chat history ê¸¸ì´ (max 20, `VITE_AI_MAX_RECENT_MESSAGES`)
- Tool definitions
- Document ë¯¸í¬í•¨ í™•ì¸ (on-demand fetch)
- System prompt êµ¬ì„±
- Tool calling maxSteps (6, max 12)

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                CHAT MODE - DRY RUN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PAYLOAD STRUCTURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Messages: 12 (System + 11 history)

[SystemMessage] (1,800 tokens est.)
â”œâ”€ Role definition: âœ…
â”œâ”€ Translation rules: âœ…
â”œâ”€ Project context: âœ…
â””â”€ Available tools: 4

[Chat History] (3,200 tokens est.)
â”œâ”€ Messages: 11 of 20 max
â”œâ”€ User messages: 6
â”œâ”€ Assistant messages: 5
â””â”€ Tool calls in history: 2

[Tools Defined] (Markdown ë°˜í™˜)
â”œâ”€ get_source_document  â†’ Source as Markdown
â”œâ”€ get_target_document  â†’ Target as Markdown
â”œâ”€ suggest_translation_rule
â””â”€ suggest_project_context

[Tool Calling Config]
â”œâ”€ maxSteps: 6 (max 12)
â””â”€ Loop strategy: continue until no tool calls

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š TOKEN ESTIMATION (GPT-5 400k context)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Input tokens:   ~5,000
Tool overhead:  ~400
Output tokens:  ~500 (estimated)
Total:          ~5,900
Context usage:  1.5% of 400k

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… DOCUMENTS NOT INCLUDED (on-demand via tools)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Source: 2,800 chars (Markdown if tool called)
Target: 3,200 chars (Markdown if tool called)
Savings: ~1,500 tokens

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Token Analysis (--tokens)

```
/test-ai --tokens
```

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  TOKEN BREAKDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š CURRENT CONTEXT USAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Component              Chars      Tokens (est.)    Limit
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Translation Rules      8,500      2,125           10,000
Project Context        12,000     3,000           30,000
Glossary              5,200      1,300           30,000
Source Document        28,000     7,000           100,000
Target Document        32,000     8,000           100,000
Attachments           0          0               50,000
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                 85,700     21,425

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ˆ USAGE BY MODE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Translation Mode:  ~12,125 tokens (rules + context + source)
Chat Mode:         ~5,125 tokens (rules + context + history)
Chat + Tools:      ~6,625 tokens (if docs fetched)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’¡ OPTIMIZATION SUGGESTIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Project Context 85% ì‚¬ìš© ì¤‘ - ì •ë¦¬ ê¶Œì¥
â€¢ Glossaryì—ì„œ ë¯¸ì‚¬ìš© ìš©ì–´ 150ê°œ ê°ì§€
â€¢ ê¸´ ë¬¸ë‹¨ 3ê°œ ê°ì§€ - ë¶„í•  ê¶Œì¥

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Validation Rules

### System Prompt
- [ ] Role definition í¬í•¨
- [ ] Output format ëª…ì‹œ (Markdown with markers for translate)
- [ ] Translation rules í¬í•¨ (translate mode)
- [ ] Tool usage ì§€ì¹¨ (chat mode)

### Translation Mode
- [ ] Source document â†’ Markdown ë³€í™˜ ì„±ê³µ
- [ ] ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” ë³€í™˜ ì™„ë£Œ
- [ ] Glossary terms highlighted
- [ ] Output markers: `---TRANSLATION_START/END---`

### Chat Mode
- [ ] History â‰¤ 20 messages
- [ ] Tools properly defined (Markdown ë°˜í™˜)
- [ ] Documents NOT in initial payload
- [ ] Request type detection working
- [ ] maxSteps: 6 (max 12)

## Live Execution (--live)

```
/test-ai --live --mode translate
```

âš ï¸ **ì£¼ì˜**: ì‹¤ì œ API í˜¸ì¶œë¡œ í† í°ì´ ì†Œë¹„ë©ë‹ˆë‹¤.

**ì‹¤í–‰ ê³¼ì •**:
1. í˜ì´ë¡œë“œ ê²€ì¦
2. ì‚¬ìš©ì í™•ì¸ í”„ë¡¬í”„íŠ¸
3. API í˜¸ì¶œ
4. ì‘ë‹µ íŒŒì‹± ê²€ì¦
5. ê²°ê³¼ í‘œì‹œ (ì ìš© ì•ˆ í•¨)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  LIVE TEST RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… API RESPONSE RECEIVED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Status: 200 OK
Latency: 2,340ms
Model: gpt-5.2

Token Usage (Actual):
â”œâ”€ Input:  5,623
â”œâ”€ Output: 3,412
â””â”€ Total:  9,035
â””â”€ Context: 2.3% of 400k

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ RESPONSE VALIDATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Markdown markers found (---TRANSLATION_START/END---)
âœ… Markdown â†’ TipTap JSON ë³€í™˜ ì„±ê³µ
âœ… ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” ë³µì› ì™„ë£Œ (3ê°œ)
âš ï¸  1 paragraph merged (review recommended)

ğŸ“‹ TRUNCATION CHECK
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… finish_reason: stop (not 'length')
âœ… No unclosed code blocks
âœ… No incomplete links at document end

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Response saved to: /tmp/test-ai-response-{timestamp}.md
Use this for debugging without re-running.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Integration

### With Agents
- **ai-chain**: í”„ë¡¬í”„íŠ¸ ìˆ˜ì • ì‹œ ì°¸ì¡°
- **store-sync**: í˜ì´ë¡œë“œì— í¬í•¨ëœ store ë°ì´í„° í™•ì¸

### Workflow
```
1. /test-ai --tokens          # í† í° ì‚¬ìš©ëŸ‰ í™•ì¸
2. /test-ai --mode translate  # í˜ì´ë¡œë“œ ë¯¸ë¦¬ë³´ê¸°
3. í”„ë¡¬í”„íŠ¸ ìˆ˜ì •              # í•„ìš”ì‹œ
4. /test-ai --live            # ì‹¤ì œ í…ŒìŠ¤íŠ¸
```

## Common Issues

### 1. Token Limit Exceeded
```
âŒ Estimated tokens (450,000) exceed model limit (400,000)
ğŸ’¡ Reduce: glossary (-5,000), context (-3,000), or split document
ğŸ’¡ GPT-5 400k context - ëŒ€ë¶€ë¶„ì˜ ë¬¸ì„œëŠ” ë¬¸ì œì—†ìŒ
```

### 2. Invalid Markdown Response
```
âŒ Response markers not found (---TRANSLATION_START/END---)
ğŸ’¡ Check system prompt output format enforcement
ğŸ’¡ extractTranslationMarkdown() fallback í™•ì¸
```

### 3. Tool Call Loop
```
âš ï¸  Tool called 6+ times in sequence (maxSteps reached)
ğŸ’¡ Review tool response format - may be triggering re-calls
ğŸ’¡ maxSteps: 6 (max 12) - ë³µí•© ì¿¼ë¦¬ ì‹œ ì¶©ë¶„í•œì§€ í™•ì¸
```

### 4. Markdown Conversion Failed
```
âŒ TipTap JSON â†’ Markdown ë³€í™˜ ì‹¤íŒ¨
ğŸ’¡ Check tiptap-markdown extension configuration
ğŸ’¡ markdownConverter.ts getExtensions() í™•ì¸
```

### 5. Image Placeholder Mismatch
```
âš ï¸  Placeholder count mismatch: 3 extracted, 2 restored
ğŸ’¡ Check restoreImages() in imagePlaceholder.ts
ğŸ’¡ AIê°€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ìˆ˜ì •í–ˆì„ ìˆ˜ ìˆìŒ
```

### 6. Translation Truncation
```
âš ï¸  Possible truncation detected
ğŸ’¡ finish_reason: 'length' â†’ max_tokens ì¦ê°€ í•„ìš”
ğŸ’¡ Unclosed code block â†’ ë¬¸ì„œ ë í™•ì¸
ğŸ’¡ Dynamic max_tokens ê³„ì‚° ë¡œì§ í™•ì¸
```
